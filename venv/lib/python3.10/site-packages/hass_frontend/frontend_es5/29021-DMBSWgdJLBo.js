"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[29021],{14089:function(e,t,n){var r,a,i=n(88962),o=n(33368),s=n(71650),c=n(82390),l=n(69205),u=n(70906),d=n(91808),h=n(68144),f=n(79932);(0,d.Z)([(0,f.Mo)("ha-settings-row")],(function(e,t){var n=function(t){(0,l.Z)(r,t);var n=(0,u.Z)(r);function r(){var t;(0,s.Z)(this,r);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return t=n.call.apply(n,[this].concat(i)),e((0,c.Z)(t)),t}return(0,o.Z)(r)}(t);return{F:n,d:[{kind:"field",decorators:[(0,f.Cb)({type:Boolean,reflect:!0})],key:"narrow",value:void 0},{kind:"field",decorators:[(0,f.Cb)({type:Boolean,attribute:"three-line"})],key:"threeLine",value:function(){return!1}},{kind:"method",key:"render",value:function(){return(0,h.dy)(r||(r=(0,i.Z)([' <div class="prefix-wrap"> <slot name="prefix"></slot> <div class="body" ?two-line="','" ?three-line="','"> <slot name="heading"></slot> <div class="secondary"><slot name="description"></slot></div> </div> </div> <div class="content"><slot></slot></div> '])),!this.threeLine,this.threeLine)}},{kind:"get",static:!0,key:"styles",value:function(){return(0,h.iv)(a||(a=(0,i.Z)([":host{display:flex;padding:0 16px;align-content:normal;align-self:auto;align-items:center}.body{padding:8px 16px 8px 0;overflow:hidden;display:var(--layout-vertical_-_display);flex-direction:var(--layout-vertical_-_flex-direction);justify-content:var(--layout-center-justified_-_justify-content);flex:var(--layout-flex_-_flex);flex-basis:var(--layout-flex_-_flex-basis)}.body[three-line]{min-height:var(--paper-item-body-three-line-min-height,88px)}.body>*{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.body>.secondary{display:block;padding-top:4px;font-family:var(--mdc-typography-body2-font-family,var(--mdc-typography-font-family,Roboto,sans-serif));-webkit-font-smoothing:antialiased;font-size:var(--mdc-typography-body2-font-size,.875rem);font-weight:var(--mdc-typography-body2-font-weight,400);line-height:normal;color:var(--secondary-text-color)}.body[two-line]{min-height:calc(var(--paper-item-body-two-line-min-height,72px) - 16px);flex:1}.content{display:contents}:host(:not([narrow])) .content{display:var(--settings-row-content-display,flex);justify-content:flex-end;flex:1;padding:16px 0}.content ::slotted(*){width:var(--settings-row-content-width)}:host([narrow]){align-items:normal;flex-direction:column;border-top:1px solid var(--divider-color);padding-bottom:8px}::slotted(ha-switch){padding:16px 0}.secondary{white-space:normal}.prefix-wrap{display:var(--settings-row-prefix-display)}:host([narrow]) .prefix-wrap{display:flex;align-items:center}"])))}}]}}),h.oi)},73728:function(e,t,n){n.d(t,{D4:function(){return u},D7:function(){return g},Ky:function(){return l},P3:function(){return s},V3:function(){return _},WW:function(){return m},XO:function(){return d},ZJ:function(){return y},d4:function(){return p},oi:function(){return f},pV:function(){return o},zO:function(){return h}});var r=n(97330),a=n(38346),i=n(5986),o=32143==n.j?["bluetooth","dhcp","discovery","hardware","hassio","homekit","integration_discovery","mqtt","ssdp","unignore","usb","zeroconf"]:null,s=32143==n.j?["reauth"]:null,c={"HA-Frontend-Base":"".concat(location.protocol,"//").concat(location.host)},l=function(e,t){var n;return e.callApi("POST","config/config_entries/flow",{handler:t,show_advanced_options:Boolean(null===(n=e.userData)||void 0===n?void 0:n.showAdvanced)},c)},u=function(e,t){return e.callApi("GET","config/config_entries/flow/".concat(t),void 0,c)},d=function(e,t,n){return e.callApi("POST","config/config_entries/flow/".concat(t),n,c)},h=function(e,t,n){return e.callWS({type:"config_entries/ignore_flow",flow_id:t,title:n})},f=function(e,t){return e.callApi("DELETE","config/config_entries/flow/".concat(t))},p=function(e,t){return e.callApi("GET","config/config_entries/flow_handlers".concat(t?"?type=".concat(t):""))},g=function(e){return e.sendMessagePromise({type:"config_entries/flow/progress"})},v=function(e,t){return e.subscribeEvents((0,a.D)((function(){return g(e).then((function(e){return t.setState(e,!0)}))}),500,!0),"config_entry_discovered")},y=function(e){return(0,r._)(e,"_configFlowProgress",g,v)},_=function(e,t){return y(e.connection).subscribe(t)},m=function(e,t){return t.context.title_placeholders&&0!==Object.keys(t.context.title_placeholders).length?e("component.".concat(t.handler,".config.flow_title"),t.context.title_placeholders)||("name"in t.context.title_placeholders?t.context.title_placeholders.name:(0,i.Lh)(e,t.handler)):(0,i.Lh)(e,t.handler)}},2852:function(e,t,n){n.d(t,{t:function(){return b}});var r,a,i,o,s,c,l,u,d,h=n(88962),f=n(99312),p=n(68990),g=n(81043),v=n(68144),y=n(73728),_=n(5986),m=n(52871),b=function(e,t){return(0,m.w)(e,t,{loadDevicesAndAreas:!0,createFlow:(b=(0,g.Z)((0,f.Z)().mark((function e(t,n){var r,a,i;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([(0,y.Ky)(t,n),t.loadBackendTranslation("config",n),t.loadBackendTranslation("selector",n),t.loadBackendTranslation("title",n)]);case 2:return r=e.sent,a=(0,p.Z)(r,1),i=a[0],e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)}))),function(e,t){return b.apply(this,arguments)}),fetchFlow:(n=(0,g.Z)((0,f.Z)().mark((function e(t,n){var r;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,y.D4)(t,n);case 2:return r=e.sent,e.next=5,t.loadBackendTranslation("config",r.handler);case 5:return e.next=7,t.loadBackendTranslation("selector",r.handler);case 7:return e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)}))),function(e,t){return n.apply(this,arguments)}),handleFlowStep:y.XO,deleteFlow:y.oi,renderAbortDescription:function(e,t){var n=e.localize("component.".concat(t.handler,".config.abort.").concat(t.reason),t.description_placeholders);return n?(0,v.dy)(r||(r=(0,h.Z)([' <ha-markdown allowsvg breaks .content="','"></ha-markdown> '])),n):""},renderShowFormStepHeader:function(e,t){return e.localize("component.".concat(t.handler,".config.step.").concat(t.step_id,".title"),t.description_placeholders)||e.localize("component.".concat(t.handler,".title"))},renderShowFormStepDescription:function(e,t){var n=e.localize("component.".concat(t.handler,".config.step.").concat(t.step_id,".description"),t.description_placeholders);return n?(0,v.dy)(a||(a=(0,h.Z)([' <ha-markdown allowsvg breaks .content="','"></ha-markdown> '])),n):""},renderShowFormStepFieldLabel:function(e,t,n){return e.localize("component.".concat(t.handler,".config.step.").concat(t.step_id,".data.").concat(n.name))},renderShowFormStepFieldHelper:function(e,t,n){var r=e.localize("component.".concat(t.handler,".config.step.").concat(t.step_id,".data_description.").concat(n.name),t.description_placeholders);return r?(0,v.dy)(i||(i=(0,h.Z)(['<ha-markdown breaks .content="','"></ha-markdown>'])),r):""},renderShowFormStepFieldError:function(e,t,n){return e.localize("component.".concat(t.handler,".config.error.").concat(n),t.description_placeholders)||n},renderShowFormStepFieldLocalizeValue:function(e,t,n){return e.localize("component.".concat(t.handler,".selector.").concat(n))},renderShowFormStepSubmitButton:function(e,t){return e.localize("component.".concat(t.handler,".config.step.").concat(t.step_id,".submit"))||e.localize("ui.panel.config.integrations.config_flow.".concat(!1===t.last_step?"next":"submit"))},renderExternalStepHeader:function(e,t){return e.localize("component.".concat(t.handler,".config.step.").concat(t.step_id,".title"))||e.localize("ui.panel.config.integrations.config_flow.external_step.open_site")},renderExternalStepDescription:function(e,t){var n=e.localize("component.".concat(t.handler,".config.").concat(t.step_id,".description"),t.description_placeholders);return(0,v.dy)(o||(o=(0,h.Z)([" <p> "," </p> "," "])),e.localize("ui.panel.config.integrations.config_flow.external_step.description"),n?(0,v.dy)(s||(s=(0,h.Z)([' <ha-markdown allowsvg breaks .content="','"></ha-markdown> '])),n):"")},renderCreateEntryDescription:function(e,t){var n=e.localize("component.".concat(t.handler,".config.create_entry.").concat(t.description||"default"),t.description_placeholders);return(0,v.dy)(c||(c=(0,h.Z)([" "," <p> "," </p> "])),n?(0,v.dy)(l||(l=(0,h.Z)([' <ha-markdown allowsvg breaks .content="','"></ha-markdown> '])),n):"",e.localize("ui.panel.config.integrations.config_flow.created_config","name",t.title))},renderShowFormProgressHeader:function(e,t){return e.localize("component.".concat(t.handler,".config.step.").concat(t.step_id,".title"))||e.localize("component.".concat(t.handler,".title"))},renderShowFormProgressDescription:function(e,t){var n=e.localize("component.".concat(t.handler,".config.progress.").concat(t.progress_action),t.description_placeholders);return n?(0,v.dy)(u||(u=(0,h.Z)([' <ha-markdown allowsvg breaks .content="','"></ha-markdown> '])),n):""},renderMenuHeader:function(e,t){return e.localize("component.".concat(t.handler,".config.step.").concat(t.step_id,".title"))||e.localize("component.".concat(t.handler,".title"))},renderMenuDescription:function(e,t){var n=e.localize("component.".concat(t.handler,".config.step.").concat(t.step_id,".description"),t.description_placeholders);return n?(0,v.dy)(d||(d=(0,h.Z)([' <ha-markdown allowsvg breaks .content="','"></ha-markdown> '])),n):""},renderMenuOption:function(e,t,n){return e.localize("component.".concat(t.handler,".config.step.").concat(t.step_id,".menu_options.").concat(n),t.description_placeholders)},renderLoadingDescription:function(e,t,n,r){if("loading_flow"!==t&&"loading_step"!==t)return"";var a=(null==r?void 0:r.handler)||n;return e.localize("ui.panel.config.integrations.config_flow.loading.".concat(t),{integration:a?(0,_.Lh)(e.localize,a):e.localize("ui.panel.config.integrations.config_flow.loading.fallback_title")})}});var n,b}},52871:function(e,t,n){n.d(t,{w:function(){return i}});var r=n(47181),a=function(){return Promise.all([n.e(46992),n.e(31338),n.e(42977),n.e(79071),n.e(3298),n.e(28597),n.e(2185),n.e(97487),n.e(33829),n.e(52154),n.e(46750),n.e(81312),n.e(40163),n.e(59159)]).then(n.bind(n,59159))},i=function(e,t,n){(0,r.B)(e,"show-dialog",{dialogTag:"dialog-data-entry-flow",dialogImport:a,dialogParams:Object.assign(Object.assign({},t),{},{flowConfig:n,dialogParentElement:e})})}},74982:function(e,t,n){var r,a,i,o,s,c,l=n(99312),u=n(81043),d=n(88962),h=n(33368),f=n(71650),p=n(82390),g=n(69205),v=n(70906),y=n(91808),_=(n(53918),n(68144)),m=n(79932),b=n(47181),k=(n(22098),n(10983),n(14089),n(55424)),w=n(38014),Z=n(26765),x=n(11654),C=n(27322),L=n(26362),H=(n(28690),n(29405)),z="M16 20H8V6H16M16.67 4H15V2H9V4H7.33C6.6 4 6 4.6 6 5.33V20.67C6 21.4 6.6 22 7.33 22H16.67C17.41 22 18 21.41 18 20.67V5.33C18 4.6 17.4 4 16.67 4M15 16H9V19H15V16M15 7H9V10H15V7M15 11.5H9V14.5H15V11.5Z";(0,y.Z)([(0,m.Mo)("ha-energy-battery-settings")],(function(e,t){var n,y,O=function(t){(0,g.Z)(r,t);var n=(0,v.Z)(r);function r(){var t;(0,f.Z)(this,r);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return t=n.call.apply(n,[this].concat(i)),e((0,p.Z)(t)),t}return(0,h.Z)(r)}(t);return{F:O,d:[{kind:"field",decorators:[(0,m.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,m.Cb)({attribute:!1})],key:"preferences",value:void 0},{kind:"field",decorators:[(0,m.Cb)({attribute:!1})],key:"statsMetadata",value:void 0},{kind:"field",decorators:[(0,m.Cb)({attribute:!1})],key:"validationResult",value:void 0},{kind:"method",key:"render",value:function(){var e=this,t=[],n=[];return this.preferences.energy_sources.forEach((function(r,a){"battery"===r.type&&(t.push(r),e.validationResult&&n.push(e.validationResult.energy_sources[a]))})),(0,_.dy)(r||(r=(0,d.Z)([' <ha-card outlined> <h1 class="card-header"> <ha-svg-icon .path="','"></ha-svg-icon> ',' </h1> <div class="card-content"> <p> ',' <a target="_blank" rel="noopener noreferrer" href="','">',"</a> </p> "," <h3> "," </h3> ",' <div class="row border-bottom"> <ha-svg-icon .path="','"></ha-svg-icon> <mwc-button @click="','">',"</mwc-button> </div> </div> </ha-card> "])),z,this.hass.localize("ui.panel.config.energy.battery.title"),this.hass.localize("ui.panel.config.energy.battery.sub"),(0,C.R)(this.hass,"/docs/energy/battery/"),this.hass.localize("ui.panel.config.energy.battery.learn_more"),n.map((function(t){return(0,_.dy)(a||(a=(0,d.Z)([' <ha-energy-validation-result .hass="','" .issues="','"></ha-energy-validation-result> '])),e.hass,t)})),this.hass.localize("ui.panel.config.energy.battery.battery_systems"),t.map((function(t){var n,r,a=e.hass.states[t.stat_energy_to];return(0,_.dy)(i||(i=(0,d.Z)([' <div class="row" .source="','"> ',' <div class="content"> <span class="label">','</span> <span class="label">','</span> </div> <ha-icon-button .label="','" @click="','" .path="','"></ha-icon-button> <ha-icon-button .label="','" @click="','" .path="','"></ha-icon-button> </div> '])),t,null!=a&&a.attributes.icon?(0,_.dy)(o||(o=(0,d.Z)(['<ha-icon .icon="','"></ha-icon>'])),a.attributes.icon):(0,_.dy)(s||(s=(0,d.Z)(['<ha-svg-icon .path="','"></ha-svg-icon>'])),z),(0,w.Kd)(e.hass,t.stat_energy_from,null===(n=e.statsMetadata)||void 0===n?void 0:n[t.stat_energy_from]),(0,w.Kd)(e.hass,t.stat_energy_to,null===(r=e.statsMetadata)||void 0===r?void 0:r[t.stat_energy_to]),e.hass.localize("ui.panel.config.energy.battery.edit_battery_system"),e._editSource,"M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z",e.hass.localize("ui.panel.config.energy.battery.delete_battery_system"),e._deleteSource,"M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z")})),z,this._addSource,this.hass.localize("ui.panel.config.energy.battery.add_battery_system"))}},{kind:"method",key:"_addSource",value:function(){var e,t=this;(0,L.Q6)(this,{saveCallback:(e=(0,u.Z)((0,l.Z)().mark((function e(n){return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._savePreferences(Object.assign(Object.assign({},t.preferences),{},{energy_sources:t.preferences.energy_sources.concat(n)}));case 2:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})})}},{kind:"method",key:"_editSource",value:function(e){var t,n=this,r=e.currentTarget.closest(".row").source;(0,L.Q6)(this,{source:Object.assign({},r),saveCallback:(t=(0,u.Z)((0,l.Z)().mark((function e(t){return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._savePreferences(Object.assign(Object.assign({},n.preferences),{},{energy_sources:n.preferences.energy_sources.map((function(e){return e===r?t:e}))}));case 2:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})})}},{kind:"method",key:"_deleteSource",value:(y=(0,u.Z)((0,l.Z)().mark((function e(t){var n;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.currentTarget.closest(".row").source,e.next=3,(0,Z.g7)(this,{title:this.hass.localize("ui.panel.config.energy.delete_source")});case 3:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,e.next=8,this._savePreferences(Object.assign(Object.assign({},this.preferences),{},{energy_sources:this.preferences.energy_sources.filter((function(e){return e!==n}))}));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),(0,Z.Ys)(this,{title:"Failed to save config: ".concat(e.t0.message)});case 13:case"end":return e.stop()}}),e,this,[[5,10]])}))),function(e){return y.apply(this,arguments)})},{kind:"method",key:"_savePreferences",value:(n=(0,u.Z)((0,l.Z)().mark((function e(t){var n;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,k._Z)(this.hass,t);case 2:n=e.sent,(0,b.B)(this,"value-changed",{value:n});case 4:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{kind:"get",static:!0,key:"styles",value:function(){return[x.Qx,H.L,(0,_.iv)(c||(c=(0,d.Z)([".row{height:58px}.content{display:flex;flex-direction:column}.label{overflow:hidden;text-overflow:ellipsis}"])))]}}]}}),_.oi)},74501:function(e,t,n){var r,a,i,o=n(99312),s=n(81043),c=n(88962),l=n(33368),u=n(71650),d=n(82390),h=n(69205),f=n(70906),p=n(91808),g=(n(53918),n(68144)),v=n(79932),y=n(47181),_=(n(22098),n(10983),n(87037),n(55424)),m=n(38014),b=n(26765),k=n(11654),w=n(27322),Z=n(26362),x=(n(28690),n(29405)),C="M3 6H21V4H3C1.9 4 1 4.9 1 6V18C1 19.1 1.9 20 3 20H7V18H3V6M13 12H9V13.78C8.39 14.33 8 15.11 8 16C8 16.89 8.39 17.67 9 18.22V20H13V18.22C13.61 17.67 14 16.88 14 16S13.61 14.33 13 13.78V12M11 17.5C10.17 17.5 9.5 16.83 9.5 16S10.17 14.5 11 14.5 12.5 15.17 12.5 16 11.83 17.5 11 17.5M22 8H16C15.5 8 15 8.5 15 9V19C15 19.5 15.5 20 16 20H22C22.5 20 23 19.5 23 19V9C23 8.5 22.5 8 22 8M21 18H17V10H21V18Z";(0,p.Z)([(0,v.Mo)("ha-energy-device-settings")],(function(e,t){var n,p,L=function(t){(0,h.Z)(r,t);var n=(0,f.Z)(r);function r(){var t;(0,u.Z)(this,r);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return t=n.call.apply(n,[this].concat(i)),e((0,d.Z)(t)),t}return(0,l.Z)(r)}(t);return{F:L,d:[{kind:"field",decorators:[(0,v.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,v.Cb)({attribute:!1})],key:"preferences",value:void 0},{kind:"field",decorators:[(0,v.Cb)({attribute:!1})],key:"statsMetadata",value:void 0},{kind:"field",decorators:[(0,v.Cb)({attribute:!1})],key:"validationResult",value:void 0},{kind:"method",key:"render",value:function(){var e,t=this;return(0,g.dy)(r||(r=(0,c.Z)([' <ha-card outlined> <h1 class="card-header"> <ha-svg-icon .path="','"></ha-svg-icon> ',' </h1> <div class="card-content"> <p> ',' <a target="_blank" rel="noopener noreferrer" href="','">',"</a> </p> "," <h3> "," </h3> ",' <div class="row"> <ha-svg-icon .path="','"></ha-svg-icon> <mwc-button @click="','">',"</mwc-button> </div> </div> </ha-card> "])),C,this.hass.localize("ui.panel.config.energy.device_consumption.title"),this.hass.localize("ui.panel.config.energy.device_consumption.sub"),(0,w.R)(this.hass,"/docs/energy/individual-devices/"),this.hass.localize("ui.panel.config.energy.device_consumption.learn_more"),null===(e=this.validationResult)||void 0===e?void 0:e.device_consumption.map((function(e){return(0,g.dy)(a||(a=(0,c.Z)([' <ha-energy-validation-result .hass="','" .issues="','"></ha-energy-validation-result> '])),t.hass,e)})),this.hass.localize("ui.panel.config.energy.device_consumption.devices"),this.preferences.device_consumption.map((function(e){var n,r=t.hass.states[e.stat_consumption];return(0,g.dy)(i||(i=(0,c.Z)([' <div class="row"> <ha-state-icon .state="','"></ha-state-icon> <span class="content">','</span> <ha-icon-button .label="','" @click="','" .device="','" .path="','"></ha-icon-button> </div> '])),r,(0,m.Kd)(t.hass,e.stat_consumption,null===(n=t.statsMetadata)||void 0===n?void 0:n[e.stat_consumption]),t.hass.localize("ui.common.delete"),t._deleteDevice,e,"M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z")})),C,this._addDevice,this.hass.localize("ui.panel.config.energy.device_consumption.add_device"))}},{kind:"method",key:"_addDevice",value:function(){var e,t=this;(0,Z.Qh)(this,{saveCallback:(e=(0,s.Z)((0,o.Z)().mark((function e(n){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._savePreferences(Object.assign(Object.assign({},t.preferences),{},{device_consumption:t.preferences.device_consumption.concat(n)}));case 2:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})})}},{kind:"method",key:"_deleteDevice",value:(p=(0,s.Z)((0,o.Z)().mark((function e(t){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.currentTarget.device,e.next=3,(0,b.g7)(this,{title:this.hass.localize("ui.panel.config.energy.delete_source")});case 3:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,e.next=8,this._savePreferences(Object.assign(Object.assign({},this.preferences),{},{device_consumption:this.preferences.device_consumption.filter((function(e){return e!==n}))}));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),(0,b.Ys)(this,{title:"Failed to save config: ".concat(e.t0.message)});case 13:case"end":return e.stop()}}),e,this,[[5,10]])}))),function(e){return p.apply(this,arguments)})},{kind:"method",key:"_savePreferences",value:(n=(0,s.Z)((0,o.Z)().mark((function e(t){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_._Z)(this.hass,t);case 2:n=e.sent,(0,y.B)(this,"value-changed",{value:n});case 4:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{kind:"get",static:!0,key:"styles",value:function(){return[k.Qx,x.L]}}]}}),g.oi)},2447:function(e,t,n){var r,a,i,o,s,c=n(99312),l=n(81043),u=n(88962),d=n(33368),h=n(71650),f=n(82390),p=n(69205),g=n(70906),v=n(91808),y=(n(53918),n(68144)),_=n(79932),m=n(47181),b=(n(22098),n(10983),n(55424)),k=n(38014),w=n(26765),Z=n(11654),x=n(27322),C=n(26362),L=(n(28690),n(29405)),H="M17.66 11.2C17.43 10.9 17.15 10.64 16.89 10.38C16.22 9.78 15.46 9.35 14.82 8.72C13.33 7.26 13 4.85 13.95 3C13 3.23 12.17 3.75 11.46 4.32C8.87 6.4 7.85 10.07 9.07 13.22C9.11 13.32 9.15 13.42 9.15 13.55C9.15 13.77 9 13.97 8.8 14.05C8.57 14.15 8.33 14.09 8.14 13.93C8.08 13.88 8.04 13.83 8 13.76C6.87 12.33 6.69 10.28 7.45 8.64C5.78 10 4.87 12.3 5 14.47C5.06 14.97 5.12 15.47 5.29 15.97C5.43 16.57 5.7 17.17 6 17.7C7.08 19.43 8.95 20.67 10.96 20.92C13.1 21.19 15.39 20.8 17.03 19.32C18.86 17.66 19.5 15 18.56 12.72L18.43 12.46C18.22 12 17.66 11.2 17.66 11.2M14.5 17.5C14.22 17.74 13.76 18 13.4 18.1C12.28 18.5 11.16 17.94 10.5 17.28C11.69 17 12.4 16.12 12.61 15.23C12.78 14.43 12.46 13.77 12.33 13C12.21 12.26 12.23 11.63 12.5 10.94C12.69 11.32 12.89 11.7 13.13 12C13.9 13 15.11 13.44 15.37 14.8C15.41 14.94 15.43 15.08 15.43 15.23C15.46 16.05 15.1 16.95 14.5 17.5H14.5Z";(0,v.Z)([(0,_.Mo)("ha-energy-gas-settings")],(function(e,t){var n,v,z=function(t){(0,p.Z)(r,t);var n=(0,g.Z)(r);function r(){var t;(0,h.Z)(this,r);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return t=n.call.apply(n,[this].concat(i)),e((0,f.Z)(t)),t}return(0,d.Z)(r)}(t);return{F:z,d:[{kind:"field",decorators:[(0,_.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,_.Cb)({attribute:!1})],key:"preferences",value:void 0},{kind:"field",decorators:[(0,_.Cb)({attribute:!1})],key:"statsMetadata",value:void 0},{kind:"field",decorators:[(0,_.Cb)({attribute:!1})],key:"validationResult",value:void 0},{kind:"method",key:"render",value:function(){var e=this,t=[],n=[];return this.preferences.energy_sources.forEach((function(r,a){"gas"===r.type&&(t.push(r),e.validationResult&&n.push(e.validationResult.energy_sources[a]))})),(0,y.dy)(r||(r=(0,u.Z)([' <ha-card outlined> <h1 class="card-header"> <ha-svg-icon .path="','"></ha-svg-icon> ',' </h1> <div class="card-content"> <p> ',' <a target="_blank" rel="noopener noreferrer" href="','">',"</a> </p> "," <h3> "," </h3> ",' <div class="row border-bottom"> <ha-svg-icon .path="','"></ha-svg-icon> <mwc-button @click="','">',"</mwc-button> </div> </div> </ha-card> "])),H,this.hass.localize("ui.panel.config.energy.gas.title"),this.hass.localize("ui.panel.config.energy.gas.sub"),(0,x.R)(this.hass,"/docs/energy/gas/"),this.hass.localize("ui.panel.config.energy.gas.learn_more"),n.map((function(t){return(0,y.dy)(a||(a=(0,u.Z)([' <ha-energy-validation-result .hass="','" .issues="','"></ha-energy-validation-result> '])),e.hass,t)})),this.hass.localize("ui.panel.config.energy.gas.gas_consumption"),t.map((function(t){var n,r=e.hass.states[t.stat_energy_from];return(0,y.dy)(i||(i=(0,u.Z)([' <div class="row" .source="','"> ',' <span class="content">','</span> <ha-icon-button .label="','" @click="','" .path="','"></ha-icon-button> <ha-icon-button .label="','" @click="','" .path="','"></ha-icon-button> </div> '])),t,null!=r&&r.attributes.icon?(0,y.dy)(o||(o=(0,u.Z)(['<ha-icon .icon="','"></ha-icon>'])),r.attributes.icon):(0,y.dy)(s||(s=(0,u.Z)(['<ha-svg-icon .path="','"></ha-svg-icon>'])),H),(0,k.Kd)(e.hass,t.stat_energy_from,null===(n=e.statsMetadata)||void 0===n?void 0:n[t.stat_energy_from]),e.hass.localize("ui.panel.config.energy.gas.edit_gas_source"),e._editSource,"M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z",e.hass.localize("ui.panel.config.energy.gas.delete_gas_source"),e._deleteSource,"M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z")})),H,this._addSource,this.hass.localize("ui.panel.config.energy.gas.add_gas_source"))}},{kind:"method",key:"_addSource",value:function(){var e,t=this;(0,C.vp)(this,{allowedGasUnitClass:(0,b.G9)(this.preferences,this.statsMetadata),saveCallback:(e=(0,l.Z)((0,c.Z)().mark((function e(n){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return delete n.unit_of_measurement,e.next=3,t._savePreferences(Object.assign(Object.assign({},t.preferences),{},{energy_sources:t.preferences.energy_sources.concat(n)}));case 3:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})})}},{kind:"method",key:"_editSource",value:function(e){var t,n,r=this,a=e.currentTarget.closest(".row").source;(0,C.vp)(this,{source:Object.assign({},a),allowedGasUnitClass:(0,b.G9)(this.preferences,this.statsMetadata,a.stat_energy_from),metadata:null===(t=this.statsMetadata)||void 0===t?void 0:t[a.stat_energy_from],saveCallback:(n=(0,l.Z)((0,c.Z)().mark((function e(t){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._savePreferences(Object.assign(Object.assign({},r.preferences),{},{energy_sources:r.preferences.energy_sources.map((function(e){return e===a?t:e}))}));case 2:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})})}},{kind:"method",key:"_deleteSource",value:(v=(0,l.Z)((0,c.Z)().mark((function e(t){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.currentTarget.closest(".row").source,e.next=3,(0,w.g7)(this,{title:this.hass.localize("ui.panel.config.energy.delete_source")});case 3:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,e.next=8,this._savePreferences(Object.assign(Object.assign({},this.preferences),{},{energy_sources:this.preferences.energy_sources.filter((function(e){return e!==n}))}));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),(0,w.Ys)(this,{title:"Failed to save config: ".concat(e.t0.message)});case 13:case"end":return e.stop()}}),e,this,[[5,10]])}))),function(e){return v.apply(this,arguments)})},{kind:"method",key:"_savePreferences",value:(n=(0,l.Z)((0,c.Z)().mark((function e(t){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,b._Z)(this.hass,t);case 2:n=e.sent,(0,m.B)(this,"value-changed",{value:n});case 4:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{kind:"get",static:!0,key:"styles",value:function(){return[Z.Qx,L.L]}}]}}),y.oi)},99012:function(e,t,n){var r,a,i,o,s,c,l,u,d,h,f=n(53709),p=n(99312),g=n(81043),v=n(88962),y=n(33368),_=n(71650),m=n(82390),b=n(69205),k=n(70906),w=n(91808),Z=(n(53918),n(68144)),x=n(79932),C=n(47181),L=(n(22098),n(10983),n(81582)),H=n(55424),z=n(38014),O=n(2852),j=n(26765),M=n(11654),S=n(11254),V=n(27322),P=n(26362),F=(n(28690),n(29405)),T="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",A="M24 13L20 17V14H11V12H20V9L24 13M4 20V12H1L11 3L18 9.3V10H15.79L11 5.69L6 10.19V18H16V16H18V20H4Z",B="M15 13L11 17V14H2V12H11V9L15 13M5 20V16H7V18H17V10.19L12 5.69L7.21 10H4.22L12 3L22 12H19V20H5Z",R="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z";(0,w.Z)([(0,x.Mo)("ha-energy-grid-settings")],(function(e,t){var n,w,E,D,K,Q=function(t){(0,b.Z)(r,t);var n=(0,k.Z)(r);function r(){var t;(0,_.Z)(this,r);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return t=n.call.apply(n,[this].concat(i)),e((0,m.Z)(t)),t}return(0,y.Z)(r)}(t);return{F:Q,d:[{kind:"field",decorators:[(0,x.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,x.Cb)({attribute:!1})],key:"preferences",value:void 0},{kind:"field",decorators:[(0,x.Cb)({attribute:!1})],key:"statsMetadata",value:void 0},{kind:"field",decorators:[(0,x.Cb)({attribute:!1})],key:"validationResult",value:void 0},{kind:"field",decorators:[(0,x.SB)()],key:"_co2ConfigEntry",value:void 0},{kind:"method",key:"firstUpdated",value:function(){this._fetchCO2SignalConfigEntries()}},{kind:"method",key:"render",value:function(){var e,t,n,f,p,g=this,y=this.preferences.energy_sources.findIndex((function(e){return"grid"===e.type}));return-1===y?f=(0,H.iK)():(f=this.preferences.energy_sources[y],this.validationResult&&(p=this.validationResult.energy_sources[y])),(0,Z.dy)(r||(r=(0,v.Z)([' <ha-card outlined> <h1 class="card-header"> <ha-svg-icon .path="','"></ha-svg-icon> ',' </h1> <div class="card-content"> <p> ',' <a target="_blank" rel="noopener noreferrer" href="','">',"</a> </p> "," <h3> "," </h3> ",' <div class="row border-bottom"> <ha-svg-icon .path="','"></ha-svg-icon> <mwc-button @click="','">',"</mwc-button> </div> <h3> "," </h3> ",' <div class="row border-bottom"> <ha-svg-icon .path="','"></ha-svg-icon> <mwc-button @click="','">',"</mwc-button> </div> <h3> "," </h3> "," </div> </ha-card> "])),"M8.28,5.45L6.5,4.55L7.76,2H16.23L17.5,4.55L15.72,5.44L15,4H9L8.28,5.45M18.62,8H14.09L13.3,5H10.7L9.91,8H5.38L4.1,10.55L5.89,11.44L6.62,10H17.38L18.1,11.45L19.89,10.56L18.62,8M17.77,22H15.7L15.46,21.1L12,15.9L8.53,21.1L8.3,22H6.23L9.12,11H11.19L10.83,12.35L12,14.1L13.16,12.35L12.81,11H14.88L17.77,22M11.4,15L10.5,13.65L9.32,18.13L11.4,15M14.68,18.12L13.5,13.64L12.6,15L14.68,18.12Z",this.hass.localize("ui.panel.config.energy.grid.title"),this.hass.localize("ui.panel.config.energy.grid.sub"),(0,V.R)(this.hass,"/docs/energy/electricity-grid/"),this.hass.localize("ui.panel.config.energy.grid.learn_more"),p?(0,Z.dy)(a||(a=(0,v.Z)([' <ha-energy-validation-result .hass="','" .issues="','"></ha-energy-validation-result> '])),this.hass,p):"",this.hass.localize("ui.panel.config.energy.grid.grid_consumption"),f.flow_from.map((function(e){var t,n=g.hass.states[e.stat_energy_from];return(0,Z.dy)(i||(i=(0,v.Z)([' <div class="row" .source="','"> ',' <span class="content">','</span> <ha-icon-button .label="','" @click="','" .path="','"></ha-icon-button> <ha-icon-button .label="','" @click="','" .path="','"></ha-icon-button> </div> '])),e,null!=n&&n.attributes.icon?(0,Z.dy)(o||(o=(0,v.Z)(['<ha-icon .icon="','"></ha-icon>'])),null==n?void 0:n.attributes.icon):(0,Z.dy)(s||(s=(0,v.Z)(['<ha-svg-icon .path="','"></ha-svg-icon>'])),B),(0,z.Kd)(g.hass,e.stat_energy_from,null===(t=g.statsMetadata)||void 0===t?void 0:t[e.stat_energy_from]),g.hass.localize("ui.panel.config.energy.grid.edit_consumption"),g._editFromSource,R,g.hass.localize("ui.panel.config.energy.grid.delete_consumption"),g._deleteFromSource,T)})),B,this._addFromSource,this.hass.localize("ui.panel.config.energy.grid.add_consumption"),this.hass.localize("ui.panel.config.energy.grid.return_to_grid"),f.flow_to.map((function(e){var t,n=g.hass.states[e.stat_energy_to];return(0,Z.dy)(c||(c=(0,v.Z)([' <div class="row" .source="','"> ',' <span class="content">','</span> <ha-icon-button .label="','" @click="','" .path="','"></ha-icon-button> <ha-icon-button .label="','" @click="','" .path="','"></ha-icon-button> </div> '])),e,null!=n&&n.attributes.icon?(0,Z.dy)(l||(l=(0,v.Z)(['<ha-icon .icon="','"></ha-icon>'])),n.attributes.icon):(0,Z.dy)(u||(u=(0,v.Z)(['<ha-svg-icon .path="','"></ha-svg-icon>'])),A),(0,z.Kd)(g.hass,e.stat_energy_to,null===(t=g.statsMetadata)||void 0===t?void 0:t[e.stat_energy_to]),g.hass.localize("ui.panel.config.energy.grid.edit_return"),g._editToSource,R,g.hass.localize("ui.panel.config.energy.grid.delete_return"),g._deleteToSource,T)})),A,this._addToSource,this.hass.localize("ui.panel.config.energy.grid.add_return"),this.hass.localize("ui.panel.config.energy.grid.grid_carbon_footprint"),this._co2ConfigEntry?(0,Z.dy)(d||(d=(0,v.Z)(['<div class="row" .entry="','"> <img alt="" referrerpolicy="no-referrer" src="','"> <span class="content">','</span> <a href="','"> <ha-icon-button .path="','"></ha-icon-button> </a> <ha-icon-button .label="','" @click="','" .path="','"></ha-icon-button> </div>'])),this._co2ConfigEntry,(0,S.X1)({domain:"co2signal",type:"icon",darkOptimized:null===(e=this.hass.themes)||void 0===e?void 0:e.darkMode}),this._co2ConfigEntry.title,"/config/integrations/integration/".concat(null===(t=this._co2ConfigEntry)||void 0===t?void 0:t.domain),R,this.hass.localize("ui.panel.config.energy.grid.remove_co2_signal"),this._removeCO2Sensor,T):(0,Z.dy)(h||(h=(0,v.Z)([' <div class="row border-bottom"> <img alt="" referrerpolicy="no-referrer" src="','"> <mwc-button @click="','"> '," </mwc-button> </div> "])),(0,S.X1)({domain:"co2signal",type:"icon",darkOptimized:null===(n=this.hass.themes)||void 0===n?void 0:n.darkMode}),this._addCO2Sensor,this.hass.localize("ui.panel.config.energy.grid.add_co2_signal")))}},{kind:"method",key:"_fetchCO2SignalConfigEntries",value:(K=(0,g.Z)((0,p.Z)().mark((function e(){var t;return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,L.pB)(this.hass,{domain:"co2signal"});case 2:t=e.sent,this._co2ConfigEntry=t.length?t[0]:void 0;case 4:case"end":return e.stop()}}),e,this)}))),function(){return K.apply(this,arguments)})},{kind:"method",key:"_addCO2Sensor",value:function(){var e=this;(0,O.t)(this,{startFlowHandler:"co2signal",dialogClosedCallback:function(){e._fetchCO2SignalConfigEntries()}})}},{kind:"method",key:"_removeCO2Sensor",value:(D=(0,g.Z)((0,p.Z)().mark((function e(t){var n;return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.currentTarget.closest(".row").entry.entry_id,e.next=3,(0,j.g7)(this,{title:this.hass.localize("ui.panel.config.energy.delete_integration")});case 3:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,(0,L.iJ)(this.hass,n);case 7:this._fetchCO2SignalConfigEntries();case 8:case"end":return e.stop()}}),e,this)}))),function(e){return D.apply(this,arguments)})},{kind:"method",key:"_addFromSource",value:function(){var e,t=this;(0,P.a0)(this,{saveCallback:(e=(0,g.Z)((0,p.Z)().mark((function e(n){var r,a;return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.preferences.energy_sources.find((function(e){return"grid"===e.type})),r=a?Object.assign(Object.assign({},t.preferences),{},{energy_sources:t.preferences.energy_sources.map((function(e){return"grid"===e.type?Object.assign(Object.assign({},e),{},{flow_from:[].concat((0,f.Z)(a.flow_from),[n])}):e}))}):Object.assign(Object.assign({},t.preferences),{},{energy_sources:[].concat((0,f.Z)(t.preferences.energy_sources),[Object.assign(Object.assign({},(0,H.iK)()),{},{flow_from:[n]})])}),e.next=4,t._savePreferences(r);case 4:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})})}},{kind:"method",key:"_addToSource",value:function(){var e,t=this;(0,P.u_)(this,{saveCallback:(e=(0,g.Z)((0,p.Z)().mark((function e(n){var r,a;return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.preferences.energy_sources.find((function(e){return"grid"===e.type})),r=a?Object.assign(Object.assign({},t.preferences),{},{energy_sources:t.preferences.energy_sources.map((function(e){return"grid"===e.type?Object.assign(Object.assign({},e),{},{flow_to:[].concat((0,f.Z)(a.flow_to),[n])}):e}))}):Object.assign(Object.assign({},t.preferences),{},{energy_sources:[].concat((0,f.Z)(t.preferences.energy_sources),[Object.assign(Object.assign({},(0,H.iK)()),{},{flow_to:[n]})])}),e.next=4,t._savePreferences(r);case 4:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})})}},{kind:"method",key:"_editFromSource",value:function(e){var t,n,r=this,a=e.currentTarget.closest(".row").source;(0,P.a0)(this,{source:Object.assign({},a),metadata:null===(t=this.statsMetadata)||void 0===t?void 0:t[a.stat_energy_from],saveCallback:(n=(0,g.Z)((0,p.Z)().mark((function e(t){var n,i;return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,H.Jj)(r.preferences).grid[0].flow_from,i=Object.assign(Object.assign({},r.preferences),{},{energy_sources:r.preferences.energy_sources.map((function(e){return"grid"===e.type?Object.assign(Object.assign({},e),{},{flow_from:n.map((function(e){return e===a?t:e}))}):e}))}),e.next=4,r._savePreferences(i);case 4:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})})}},{kind:"method",key:"_editToSource",value:function(e){var t,n,r=this,a=e.currentTarget.closest(".row").source;(0,P.u_)(this,{source:Object.assign({},a),metadata:null===(t=this.statsMetadata)||void 0===t?void 0:t[a.stat_energy_to],saveCallback:(n=(0,g.Z)((0,p.Z)().mark((function e(t){var n,i;return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,H.Jj)(r.preferences).grid[0].flow_to,i=Object.assign(Object.assign({},r.preferences),{},{energy_sources:r.preferences.energy_sources.map((function(e){return"grid"===e.type?Object.assign(Object.assign({},e),{},{flow_to:n.map((function(e){return e===a?t:e}))}):e}))}),e.next=4,r._savePreferences(i);case 4:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})})}},{kind:"method",key:"_deleteFromSource",value:(E=(0,g.Z)((0,p.Z)().mark((function e(t){var n,r,a;return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.currentTarget.closest(".row").source,e.next=3,(0,j.g7)(this,{title:this.hass.localize("ui.panel.config.energy.delete_source")});case 3:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:return r=(0,H.Jj)(this.preferences).grid[0].flow_from.filter((function(e){return e!==n})),a=Object.assign(Object.assign({},this.preferences),{},{energy_sources:this.preferences.energy_sources.map((function(e){return"grid"===e.type?Object.assign(Object.assign({},e),{},{flow_from:r}):e}))}),e.prev=7,e.next=10,this._savePreferences(a);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(7),(0,j.Ys)(this,{title:"Failed to save config: ".concat(e.t0.message)});case 15:case"end":return e.stop()}}),e,this,[[7,12]])}))),function(e){return E.apply(this,arguments)})},{kind:"method",key:"_deleteToSource",value:(w=(0,g.Z)((0,p.Z)().mark((function e(t){var n,r,a;return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.currentTarget.closest(".row").source,e.next=3,(0,j.g7)(this,{title:this.hass.localize("ui.panel.config.energy.delete_source")});case 3:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:return r=(0,H.Jj)(this.preferences).grid[0].flow_to.filter((function(e){return e!==n})),a=Object.assign(Object.assign({},this.preferences),{},{energy_sources:this.preferences.energy_sources.map((function(e){return"grid"===e.type?Object.assign(Object.assign({},e),{},{flow_to:r}):e}))}),e.prev=7,e.next=10,this._savePreferences(a);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(7),(0,j.Ys)(this,{title:"Failed to save config: ".concat(e.t0.message)});case 15:case"end":return e.stop()}}),e,this,[[7,12]])}))),function(e){return w.apply(this,arguments)})},{kind:"method",key:"_savePreferences",value:(n=(0,g.Z)((0,p.Z)().mark((function e(t){var n;return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,H._Z)(this.hass,t);case 2:n=e.sent,(0,C.B)(this,"value-changed",{value:n});case 4:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{kind:"get",static:!0,key:"styles",value:function(){return[M.Qx,F.L]}}]}}),Z.oi)},84744:function(e,t,n){var r,a,i,o,s,c,l,u=n(99312),d=n(81043),h=n(88962),f=n(33368),p=n(71650),g=n(82390),v=n(69205),y=n(70906),_=n(91808),m=(n(53918),n(68144)),b=n(79932),k=n(47181),w=(n(22098),n(10983),n(55424)),Z=n(38014),x=n(26765),C=n(11654),L=n(27322),H=n(26362),z=(n(28690),n(29405)),O="M11.45,2V5.55L15,3.77L11.45,2M10.45,8L8,10.46L11.75,11.71L10.45,8M2,11.45L3.77,15L5.55,11.45H2M10,2H2V10C2.57,10.17 3.17,10.25 3.77,10.25C7.35,10.26 10.26,7.35 10.27,3.75C10.26,3.16 10.17,2.57 10,2M17,22V16H14L19,7V13H22L17,22Z";(0,_.Z)([(0,b.Mo)("ha-energy-solar-settings")],(function(e,t){var n,_,j=function(t){(0,v.Z)(r,t);var n=(0,y.Z)(r);function r(){var t;(0,p.Z)(this,r);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return t=n.call.apply(n,[this].concat(i)),e((0,g.Z)(t)),t}return(0,f.Z)(r)}(t);return{F:j,d:[{kind:"field",decorators:[(0,b.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,b.Cb)({attribute:!1})],key:"preferences",value:void 0},{kind:"field",decorators:[(0,b.Cb)({attribute:!1})],key:"statsMetadata",value:void 0},{kind:"field",decorators:[(0,b.Cb)({attribute:!1})],key:"validationResult",value:void 0},{kind:"field",decorators:[(0,b.Cb)({attribute:!1})],key:"info",value:void 0},{kind:"method",key:"render",value:function(){var e=this,t=[],n=[];return this.preferences.energy_sources.forEach((function(r,a){"solar"===r.type&&(t.push(r),e.validationResult&&n.push(e.validationResult.energy_sources[a]))})),(0,m.dy)(r||(r=(0,h.Z)([' <ha-card outlined> <h1 class="card-header"> <ha-svg-icon .path="','"></ha-svg-icon> ',' </h1> <div class="card-content"> <p> ',' <a target="_blank" rel="noopener noreferrer" href="','">',"</a> </p> "," <h3> "," </h3> "," "," </div> </ha-card> "])),O,this.hass.localize("ui.panel.config.energy.solar.title"),this.hass.localize("ui.panel.config.energy.solar.sub"),(0,L.R)(this.hass,"/docs/energy/solar-panels/"),this.hass.localize("ui.panel.config.energy.solar.learn_more"),n.map((function(t){return(0,m.dy)(a||(a=(0,h.Z)([' <ha-energy-validation-result .hass="','" .issues="','"></ha-energy-validation-result> '])),e.hass,t)})),this.hass.localize("ui.panel.config.energy.solar.solar_production"),t.map((function(t){var n,r=e.hass.states[t.stat_energy_from];return(0,m.dy)(i||(i=(0,h.Z)([' <div class="row" .source="','"> ',' <span class="content">',"</span> ",' <ha-icon-button .label="','" @click="','" .path="','"></ha-icon-button> </div> '])),t,null!=r&&r.attributes.icon?(0,m.dy)(o||(o=(0,h.Z)(['<ha-icon .icon="','"></ha-icon>'])),r.attributes.icon):(0,m.dy)(s||(s=(0,h.Z)(['<ha-svg-icon .path="','"></ha-svg-icon>'])),O),(0,Z.Kd)(e.hass,t.stat_energy_from,null===(n=e.statsMetadata)||void 0===n?void 0:n[t.stat_energy_from]),e.info?(0,m.dy)(c||(c=(0,h.Z)([' <ha-icon-button .label="','" @click="','" .path="','"></ha-icon-button> '])),e.hass.localize("ui.panel.config.energy.solar.edit_solar_production"),e._editSource,"M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z"):"",e.hass.localize("ui.panel.config.energy.solar.delete_solar_production"),e._deleteSource,"M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z")})),this.info?(0,m.dy)(l||(l=(0,h.Z)([' <div class="row border-bottom"> <ha-svg-icon .path="','"></ha-svg-icon> <mwc-button @click="','"> '," </mwc-button> </div> "])),O,this._addSource,this.hass.localize("ui.panel.config.energy.solar.add_solar_production")):"")}},{kind:"method",key:"_addSource",value:function(){var e,t=this;(0,H.v3)(this,{info:this.info,saveCallback:(e=(0,d.Z)((0,u.Z)().mark((function e(n){return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._savePreferences(Object.assign(Object.assign({},t.preferences),{},{energy_sources:t.preferences.energy_sources.concat(n)}));case 2:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})})}},{kind:"method",key:"_editSource",value:function(e){var t,n=this,r=e.currentTarget.closest(".row").source;(0,H.v3)(this,{info:this.info,source:Object.assign({},r),saveCallback:(t=(0,d.Z)((0,u.Z)().mark((function e(t){return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._savePreferences(Object.assign(Object.assign({},n.preferences),{},{energy_sources:n.preferences.energy_sources.map((function(e){return e===r?t:e}))}));case 2:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})})}},{kind:"method",key:"_deleteSource",value:(_=(0,d.Z)((0,u.Z)().mark((function e(t){var n;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.currentTarget.closest(".row").source,e.next=3,(0,x.g7)(this,{title:this.hass.localize("ui.panel.config.energy.delete_source")});case 3:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,e.next=8,this._savePreferences(Object.assign(Object.assign({},this.preferences),{},{energy_sources:this.preferences.energy_sources.filter((function(e){return e!==n}))}));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),(0,x.Ys)(this,{title:"Failed to save config: ".concat(e.t0.message)});case 13:case"end":return e.stop()}}),e,this,[[5,10]])}))),function(e){return _.apply(this,arguments)})},{kind:"method",key:"_savePreferences",value:(n=(0,d.Z)((0,u.Z)().mark((function e(t){var n;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,w._Z)(this.hass,t);case 2:n=e.sent,(0,k.B)(this,"value-changed",{value:n});case 4:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{kind:"get",static:!0,key:"styles",value:function(){return[C.Qx,z.L]}}]}}),m.oi)},28690:function(e,t,n){var r,a,i,o,s,c=n(68990),l=n(88962),u=n(33368),d=n(71650),h=n(82390),f=n(69205),p=n(70906),g=n(91808),v=n(68144),y=n(79932);n(9381),(0,g.Z)([(0,y.Mo)("ha-energy-validation-result")],(function(e,t){var n=function(t){(0,f.Z)(r,t);var n=(0,p.Z)(r);function r(){var t;(0,d.Z)(this,r);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return t=n.call.apply(n,[this].concat(i)),e((0,h.Z)(t)),t}return(0,u.Z)(r)}(t);return{F:n,d:[{kind:"field",decorators:[(0,y.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,y.Cb)()],key:"issues",value:void 0},{kind:"method",key:"render",value:function(){var e=this;return 0===this.issues.length?v.Ld:this.issues.map((function(t){return(0,v.dy)(r||(r=(0,l.Z)([' <ha-alert alert-type="warning" .title="','"> '," "," <ul> "," </ul> </ha-alert> "])),e.hass.localize("component.energy.issues.".concat(t.type,".title"))||t.type,e.hass.localize("component.energy.issues.".concat(t.type,".description"),t.translation_placeholders),"recorder_untracked"===t.type?(0,v.dy)(a||(a=(0,l.Z)(['(<a href="https://www.home-assistant.io/integrations/recorder#configure-filter" target="_blank" rel="noopener noreferrer">',"</a>)"])),e.hass.localize("ui.panel.config.common.learn_more")):"",t.affected_entities.map((function(e){var t=(0,c.Z)(e,2),n=t[0],r=t[1];return(0,v.dy)(i||(i=(0,l.Z)(["<li>","","</li>"])),n,r?(0,v.dy)(o||(o=(0,l.Z)([" (",")"])),r):"")})))}))}},{kind:"field",static:!0,key:"styles",value:function(){return(0,v.iv)(s||(s=(0,l.Z)(["ul{padding-left:24px;margin:4px 0}a{color:var(--primary-color)}"])))}}]}}),v.oi)},33885:function(e,t,n){var r,a,i,o,s,c=n(99312),l=n(81043),u=n(88962),d=n(33368),h=n(71650),f=n(82390),p=n(69205),g=n(70906),v=n(91808),y=(n(53918),n(68144)),_=n(79932),m=n(47181),b=(n(22098),n(10983),n(55424)),k=n(38014),w=n(26765),Z=n(11654),x=n(27322),C=n(26362),L=(n(28690),n(29405)),H="M12,20A6,6 0 0,1 6,14C6,10 12,3.25 12,3.25C12,3.25 18,10 18,14A6,6 0 0,1 12,20Z";(0,v.Z)([(0,_.Mo)("ha-energy-water-settings")],(function(e,t){var n,v,z=function(t){(0,p.Z)(r,t);var n=(0,g.Z)(r);function r(){var t;(0,h.Z)(this,r);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return t=n.call.apply(n,[this].concat(i)),e((0,f.Z)(t)),t}return(0,d.Z)(r)}(t);return{F:z,d:[{kind:"field",decorators:[(0,_.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,_.Cb)({attribute:!1})],key:"preferences",value:void 0},{kind:"field",decorators:[(0,_.Cb)({attribute:!1})],key:"statsMetadata",value:void 0},{kind:"field",decorators:[(0,_.Cb)({attribute:!1})],key:"validationResult",value:void 0},{kind:"method",key:"render",value:function(){var e=this,t=[],n=[];return this.preferences.energy_sources.forEach((function(r,a){"water"===r.type&&(t.push(r),e.validationResult&&n.push(e.validationResult.energy_sources[a]))})),(0,y.dy)(r||(r=(0,u.Z)([' <ha-card outlined> <h1 class="card-header"> <ha-svg-icon .path="','"></ha-svg-icon> ',' </h1> <div class="card-content"> <p> ',' <a target="_blank" rel="noopener noreferrer" href="','">',"</a> </p> "," <h3> "," </h3> ",' <div class="row border-bottom"> <ha-svg-icon .path="','"></ha-svg-icon> <mwc-button @click="','">',"</mwc-button> </div> </div> </ha-card> "])),H,this.hass.localize("ui.panel.config.energy.water.title"),this.hass.localize("ui.panel.config.energy.water.sub"),(0,x.R)(this.hass,"/docs/energy/water/"),this.hass.localize("ui.panel.config.energy.water.learn_more"),n.map((function(t){return(0,y.dy)(a||(a=(0,u.Z)([' <ha-energy-validation-result .hass="','" .issues="','"></ha-energy-validation-result> '])),e.hass,t)})),this.hass.localize("ui.panel.config.energy.water.water_consumption"),t.map((function(t){var n,r=e.hass.states[t.stat_energy_from];return(0,y.dy)(i||(i=(0,u.Z)([' <div class="row" .source="','"> ',' <span class="content">','</span> <ha-icon-button .label="','" @click="','" .path="','"></ha-icon-button> <ha-icon-button .label="','" @click="','" .path="','"></ha-icon-button> </div> '])),t,null!=r&&r.attributes.icon?(0,y.dy)(o||(o=(0,u.Z)(['<ha-icon .icon="','"></ha-icon>'])),r.attributes.icon):(0,y.dy)(s||(s=(0,u.Z)(['<ha-svg-icon .path="','"></ha-svg-icon>'])),H),(0,k.Kd)(e.hass,t.stat_energy_from,null===(n=e.statsMetadata)||void 0===n?void 0:n[t.stat_energy_from]),e.hass.localize("ui.panel.config.energy.water.edit_water_source"),e._editSource,"M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z",e.hass.localize("ui.panel.config.energy.water.delete_water_source"),e._deleteSource,"M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z")})),H,this._addSource,this.hass.localize("ui.panel.config.energy.water.add_water_source"))}},{kind:"method",key:"_addSource",value:function(){var e,t=this;(0,C.lS)(this,{saveCallback:(e=(0,l.Z)((0,c.Z)().mark((function e(n){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return delete n.unit_of_measurement,e.next=3,t._savePreferences(Object.assign(Object.assign({},t.preferences),{},{energy_sources:t.preferences.energy_sources.concat(n)}));case 3:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})})}},{kind:"method",key:"_editSource",value:function(e){var t,n,r=this,a=e.currentTarget.closest(".row").source;(0,C.lS)(this,{source:Object.assign({},a),metadata:null===(t=this.statsMetadata)||void 0===t?void 0:t[a.stat_energy_from],saveCallback:(n=(0,l.Z)((0,c.Z)().mark((function e(t){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._savePreferences(Object.assign(Object.assign({},r.preferences),{},{energy_sources:r.preferences.energy_sources.map((function(e){return e===a?t:e}))}));case 2:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})})}},{kind:"method",key:"_deleteSource",value:(v=(0,l.Z)((0,c.Z)().mark((function e(t){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.currentTarget.closest(".row").source,e.next=3,(0,w.g7)(this,{title:this.hass.localize("ui.panel.config.energy.delete_source")});case 3:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,e.next=8,this._savePreferences(Object.assign(Object.assign({},this.preferences),{},{energy_sources:this.preferences.energy_sources.filter((function(e){return e!==n}))}));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),(0,w.Ys)(this,{title:"Failed to save config: ".concat(e.t0.message)});case 13:case"end":return e.stop()}}),e,this,[[5,10]])}))),function(e){return v.apply(this,arguments)})},{kind:"method",key:"_savePreferences",value:(n=(0,l.Z)((0,c.Z)().mark((function e(t){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,b._Z)(this.hass,t);case 2:n=e.sent,(0,m.B)(this,"value-changed",{value:n});case 4:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{kind:"get",static:!0,key:"styles",value:function(){return[Z.Qx,L.L]}}]}}),y.oi)},29405:function(e,t,n){n.d(t,{L:function(){return i}});var r,a=n(88962),i=(0,n(68144).iv)(r||(r=(0,a.Z)(["ha-card{height:100%}.card-header ha-svg-icon{height:32px;width:32px;margin-right:8px;margin-inline-end:8px;margin-inline-start:initial;direction:var(--direction)}h3{margin-top:24px;margin-bottom:4px}.row{display:flex;align-items:center;border-top:1px solid var(--divider-color);height:48px;box-sizing:border-box}.row ha-icon,.row ha-svg-icon,.row img{margin-right:16px;margin-inline-end:16px;margin-inline-start:initial;direction:var(--direction)}.row img{height:24px}.row .content{flex-grow:1;overflow:hidden;text-overflow:ellipsis}ha-icon-button{color:var(--secondary-text-color)}"])))},26362:function(e,t,n){n.d(t,{Q6:function(){return i},Qh:function(){return a},a0:function(){return l},lS:function(){return c},u_:function(){return u},v3:function(){return o},vp:function(){return s}});var r=n(47181),a=function(e,t){(0,r.B)(e,"show-dialog",{dialogTag:"dialog-energy-device-settings",dialogImport:function(){return Promise.all([n.e(46992),n.e(31338),n.e(42977),n.e(79071),n.e(28597),n.e(2185),n.e(97487),n.e(70632),n.e(67947),n.e(40163),n.e(74535),n.e(3143),n.e(49887)]).then(n.bind(n,74936))},dialogParams:t})},i=function(e,t){(0,r.B)(e,"show-dialog",{dialogTag:"dialog-energy-battery-settings",dialogImport:function(){return Promise.all([n.e(46992),n.e(31338),n.e(42977),n.e(79071),n.e(28597),n.e(2185),n.e(97487),n.e(40163),n.e(3143),n.e(55216)]).then(n.bind(n,1127))},dialogParams:t})},o=function(e,t){(0,r.B)(e,"show-dialog",{dialogTag:"dialog-energy-solar-settings",dialogImport:function(){return Promise.all([n.e(46992),n.e(31338),n.e(42977),n.e(79071),n.e(28597),n.e(2185),n.e(97487),n.e(41985),n.e(70632),n.e(41426),n.e(40163),n.e(3143),n.e(99503)]).then(n.bind(n,87651))},dialogParams:t})},s=function(e,t){(0,r.B)(e,"show-dialog",{dialogTag:"dialog-energy-gas-settings",dialogImport:function(){return Promise.all([n.e(46992),n.e(31338),n.e(42977),n.e(79071),n.e(28597),n.e(2185),n.e(97487),n.e(70632),n.e(32014),n.e(40163),n.e(74535),n.e(3143),n.e(54695)]).then(n.bind(n,72595))},dialogParams:t})},c=function(e,t){(0,r.B)(e,"show-dialog",{dialogTag:"dialog-energy-water-settings",dialogImport:function(){return Promise.all([n.e(46992),n.e(31338),n.e(42977),n.e(79071),n.e(28597),n.e(2185),n.e(97487),n.e(70632),n.e(98974),n.e(40163),n.e(74535),n.e(3143),n.e(54813)]).then(n.bind(n,56282))},dialogParams:t})},l=function(e,t){(0,r.B)(e,"show-dialog",{dialogTag:"dialog-energy-grid-flow-settings",dialogImport:function(){return Promise.all([n.e(46992),n.e(31338),n.e(42977),n.e(79071),n.e(28597),n.e(2185),n.e(97487),n.e(70632),n.e(68122),n.e(40163),n.e(74535),n.e(3143),n.e(34740)]).then(n.bind(n,44930))},dialogParams:Object.assign(Object.assign({},t),{},{direction:"from"})})},u=function(e,t){(0,r.B)(e,"show-dialog",{dialogTag:"dialog-energy-grid-flow-settings",dialogImport:function(){return Promise.all([n.e(46992),n.e(31338),n.e(42977),n.e(79071),n.e(28597),n.e(2185),n.e(97487),n.e(70632),n.e(68122),n.e(40163),n.e(74535),n.e(3143),n.e(34740)]).then(n.bind(n,44930))},dialogParams:Object.assign(Object.assign({},t),{},{direction:"to"})})}},11254:function(e,t,n){n.d(t,{RU:function(){return a},X1:function(){return r},u4:function(){return i},zC:function(){return o}});var r=function(e){return"https://brands.home-assistant.io/".concat(e.brand?"brands/":"").concat(e.useFallback?"_/":"").concat(e.domain,"/").concat(e.darkOptimized?"dark_":"").concat(e.type,".png")},a=function(e){return"https://brands.home-assistant.io/hardware/".concat(e.category,"/").concat(e.darkOptimized?"dark_":"").concat(e.manufacturer).concat(e.model?"_".concat(e.model):"",".png")},i=function(e){return e.split("/")[4]},o=function(e){return e.startsWith("https://brands.home-assistant.io/")}},27322:function(e,t,n){n.d(t,{R:function(){return r}});var r=function(e,t){return"https://".concat(e.config.version.includes("b")?"rc":e.config.version.includes("dev")?"next":"www",".home-assistant.io").concat(t)}}}]);
//# sourceMappingURL=29021-DMBSWgdJLBo.js.map