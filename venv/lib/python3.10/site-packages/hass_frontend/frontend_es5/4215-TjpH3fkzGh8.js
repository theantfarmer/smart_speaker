"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[4215],{48259:function(e,a,t){t.r(a),t.d(a,{DialogHassioBackupUpload:function(){return _}});var r,o,n,i=t(88962),l=t(99312),c=t(81043),d=t(33368),s=t(71650),u=t(82390),p=t(69205),h=t(70906),f=t(91808),g=t(68144),k=t(79932),v=t(47181),b=(t(90806),t(10983),t(11654)),m=(t(31206),t(67622),t(60538)),y=t(41682),x=t(26765),_=((0,f.Z)([(0,k.Mo)("hassio-upload-backup")],(function(e,a){var t,o=function(a){(0,p.Z)(r,a);var t=(0,h.Z)(r);function r(){var a;(0,s.Z)(this,r);for(var o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return a=t.call.apply(t,[this].concat(n)),e((0,u.Z)(a)),a}return(0,d.Z)(r)}(a);return{F:o,d:[{kind:"field",key:"hass",value:void 0},{kind:"field",decorators:[(0,k.SB)()],key:"value",value:function(){return null}},{kind:"field",decorators:[(0,k.SB)()],key:"_uploading",value:function(){return!1}},{kind:"method",key:"render",value:function(){return(0,g.dy)(r||(r=(0,i.Z)([' <ha-file-upload .hass="','" .uploading="','" .icon="','" accept="application/x-tar" label="Upload backup" @file-picked="','" auto-open-file-dialog></ha-file-upload> '])),this.hass,this._uploading,"M20,6A2,2 0 0,1 22,8V18A2,2 0 0,1 20,20H4A2,2 0 0,1 2,18V6A2,2 0 0,1 4,4H10L12,6H20M10.75,13H14V17H16V13H19.25L15,8.75",this._uploadFile)}},{kind:"method",key:"_uploadFile",value:(t=(0,c.Z)((0,l.Z)().mark((function e(a){var t,r;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.detail.files[0],["application/x-tar"].includes(t.type)){e.next=4;break}return(0,x.Ys)(this,{title:"Unsupported file format",text:"Please choose a Home Assistant backup file (.tar)",confirmText:"ok"}),e.abrupt("return");case 4:return this._uploading=!0,e.prev=5,e.next=8,(0,m.p_)(this.hass,t);case 8:r=e.sent,(0,v.B)(this,"backup-uploaded",{backup:r.data}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),(0,x.Ys)(this,{title:"Upload failed",text:(0,y.js)(e.t0),confirmText:"ok"});case 15:return e.prev=15,this._uploading=!1,e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[5,12,15,18]])}))),function(e){return t.apply(this,arguments)})}]}}),g.oi),(0,f.Z)([(0,k.Mo)("dialog-hassio-backup-upload")],(function(e,a){var t,r=function(a){(0,p.Z)(r,a);var t=(0,h.Z)(r);function r(){var a;(0,s.Z)(this,r);for(var o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return a=t.call.apply(t,[this].concat(n)),e((0,u.Z)(a)),a}return(0,d.Z)(r)}(a);return{F:r,d:[{kind:"field",decorators:[(0,k.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,k.SB)()],key:"_dialogParams",value:void 0},{kind:"method",key:"showDialog",value:(t=(0,c.Z)((0,l.Z)().mark((function e(a){return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._dialogParams=a,e.next=3,this.updateComplete;case 3:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{kind:"method",key:"closeDialog",value:function(){this._dialogParams&&!this._dialogParams.onboarding&&this._dialogParams.reloadBackup&&this._dialogParams.reloadBackup(),this._dialogParams=void 0,(0,v.B)(this,"dialog-closed",{dialog:this.localName})}},{kind:"method",key:"render",value:function(){var e,a,t;return this._dialogParams?(0,g.dy)(o||(o=(0,i.Z)([' <ha-dialog open scrimClickAction escapeKeyAction hideActions .heading="','" @closed="','"> <div slot="heading"> <ha-header-bar> <span slot="title">','</span> <ha-icon-button .label="','" .path="','" slot="actionItems" dialogAction="cancel" dialogInitialFocus></ha-icon-button> </ha-header-bar> </div> <hassio-upload-backup @backup-uploaded="','" .hass="','"></hassio-upload-backup> </ha-dialog> '])),(null===(e=this.hass)||void 0===e?void 0:e.localize("ui.panel.page-onboarding.restore.upload_backup"))||"Upload backup",this.closeDialog,(null===(a=this.hass)||void 0===a?void 0:a.localize("ui.panel.page-onboarding.restore.upload_backup"))||"Upload backup",(null===(t=this.hass)||void 0===t?void 0:t.localize("ui.common.close"))||"Close","M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z",this._backupUploaded,this.hass):g.Ld}},{kind:"method",key:"_backupUploaded",value:function(e){var a,t=e.detail.backup;null===(a=this._dialogParams)||void 0===a||a.showBackup(t.slug),this.closeDialog()}},{kind:"get",static:!0,key:"styles",value:function(){return[b.yu,(0,g.iv)(n||(n=(0,i.Z)(["ha-header-bar{--mdc-theme-on-primary:var(--primary-text-color);--mdc-theme-primary:var(--mdc-theme-surface);flex-shrink:0}@media all and (max-width:450px),all and (max-height:500px){ha-header-bar{--mdc-theme-primary:var(--app-header-background-color);--mdc-theme-on-primary:var(--app-header-text-color, white)}}"])))]}}]}}),g.oi))},63864:function(e,a,t){t.d(a,{I:function(){return o}});var r=t(68990),o=function(e,a,t,o){var n=e.split(".",3),i=(0,r.Z)(n,3),l=i[0],c=i[1],d=i[2];return Number(l)>a||Number(l)===a&&(void 0===o?Number(c)>=t:Number(c)>t)||void 0!==o&&Number(l)===a&&Number(c)===t&&Number(d)>=o}},54736:function(e,a,t){var r,o,n=t(88962),i=t(33368),l=t(71650),c=t(82390),d=t(69205),s=t(70906),u=t(91808),p=t(68144),h=t(79932);(0,u.Z)([(0,h.Mo)("ha-ansi-to-html")],(function(e,a){var t=function(a){(0,d.Z)(r,a);var t=(0,s.Z)(r);function r(){var a;(0,l.Z)(this,r);for(var o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return a=t.call.apply(t,[this].concat(n)),e((0,c.Z)(a)),a}return(0,i.Z)(r)}(a);return{F:t,d:[{kind:"field",decorators:[(0,h.Cb)()],key:"content",value:void 0},{kind:"method",key:"render",value:function(){return(0,p.dy)(r||(r=(0,n.Z)(["",""])),this._parseTextToColoredPre(this.content))}},{kind:"get",static:!0,key:"styles",value:function(){return(0,p.iv)(o||(o=(0,n.Z)(["pre{overflow-x:auto;white-space:pre-wrap;overflow-wrap:break-word}.bold{font-weight:700}.italic{font-style:italic}.underline{text-decoration:underline}.strikethrough{text-decoration:line-through}.underline.strikethrough{text-decoration:underline line-through}.fg-red{color:var(--error-color)}.fg-green{color:var(--success-color)}.fg-yellow{color:var(--warning-color)}.fg-blue{color:var(--info-color)}.fg-magenta{color:#762671}.fg-cyan{color:#2cb5e9}.fg-white{color:#ccc}.bg-black{background-color:#000}.bg-red{background-color:var(--error-color)}.bg-green{background-color:var(--success-color)}.bg-yellow{background-color:var(--warning-color)}.bg-blue{background-color:var(--info-color)}.bg-magenta{background-color:#762671}.bg-cyan{background-color:#2cb5e9}.bg-white{background-color:#ccc}"])))}},{kind:"method",key:"_parseTextToColoredPre",value:function(e){for(var a,t=document.createElement("pre"),r=/\033(?:\[(.*?)[@-~]|\].*?(?:\007|\033\\))/g,o=0,n={bold:!1,italic:!1,underline:!1,strikethrough:!1,foregroundColor:null,backgroundColor:null},i=function(e){var a=document.createElement("span");n.bold&&a.classList.add("bold"),n.italic&&a.classList.add("italic"),n.underline&&a.classList.add("underline"),n.strikethrough&&a.classList.add("strikethrough"),null!==n.foregroundColor&&a.classList.add("fg-".concat(n.foregroundColor)),null!==n.backgroundColor&&a.classList.add("bg-".concat(n.backgroundColor)),a.appendChild(document.createTextNode(e)),t.appendChild(a)};null!==(a=r.exec(e));){var l=a.index;i(e.substring(o,l)),o=l+a[0].length,void 0!==a[1]&&a[1].split(";").forEach((function(e){switch(parseInt(e,10)){case 0:n.bold=!1,n.italic=!1,n.underline=!1,n.strikethrough=!1,n.foregroundColor=null,n.backgroundColor=null;break;case 1:n.bold=!0;break;case 3:n.italic=!0;break;case 4:n.underline=!0;break;case 9:n.strikethrough=!0;break;case 22:n.bold=!1;break;case 23:n.italic=!1;break;case 24:n.underline=!1;break;case 29:n.strikethrough=!1;break;case 30:case 39:n.foregroundColor=null;break;case 31:n.foregroundColor="red";break;case 32:n.foregroundColor="green";break;case 33:n.foregroundColor="yellow";break;case 34:n.foregroundColor="blue";break;case 35:n.foregroundColor="magenta";break;case 36:n.foregroundColor="cyan";break;case 37:n.foregroundColor="white";break;case 40:n.backgroundColor="black";break;case 41:n.backgroundColor="red";break;case 42:n.backgroundColor="green";break;case 43:n.backgroundColor="yellow";break;case 44:n.backgroundColor="blue";break;case 45:n.backgroundColor="magenta";break;case 46:n.backgroundColor="cyan";break;case 47:n.backgroundColor="white";break;case 49:n.backgroundColor=null}}))}return i(e.substring(o)),t}}]}}),p.oi)},22098:function(e,a,t){var r,o,n,i=t(88962),l=t(33368),c=t(71650),d=t(82390),s=t(69205),u=t(70906),p=t(91808),h=t(68144),f=t(79932);(0,p.Z)([(0,f.Mo)("ha-card")],(function(e,a){var t=function(a){(0,s.Z)(r,a);var t=(0,u.Z)(r);function r(){var a;(0,c.Z)(this,r);for(var o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return a=t.call.apply(t,[this].concat(n)),e((0,d.Z)(a)),a}return(0,l.Z)(r)}(a);return{F:t,d:[{kind:"field",decorators:[(0,f.Cb)()],key:"header",value:void 0},{kind:"field",decorators:[(0,f.Cb)({type:Boolean,reflect:!0})],key:"raised",value:function(){return!1}},{kind:"get",static:!0,key:"styles",value:function(){return(0,h.iv)(r||(r=(0,i.Z)([":host{background:var(--ha-card-background,var(--card-background-color,#fff));box-shadow:var(--ha-card-box-shadow,none);box-sizing:border-box;border-radius:var(--ha-card-border-radius,12px);border-width:var(--ha-card-border-width,1px);border-style:solid;border-color:var(--ha-card-border-color,var(--divider-color,#e0e0e0));color:var(--primary-text-color);display:block;transition:all .3s ease-out;position:relative}:host([raised]){border:none;box-shadow:var(--ha-card-box-shadow,0px 2px 1px -1px rgba(0,0,0,.2),0px 1px 1px 0px rgba(0,0,0,.14),0px 1px 3px 0px rgba(0,0,0,.12))}.card-header,:host ::slotted(.card-header){color:var(--ha-card-header-color,--primary-text-color);font-family:var(--ha-card-header-font-family,inherit);font-size:var(--ha-card-header-font-size,24px);letter-spacing:-.012em;line-height:48px;padding:12px 16px 16px;display:block;margin-block-start:0px;margin-block-end:0px;font-weight:400}:host ::slotted(.card-content:not(:first-child)),slot:not(:first-child)::slotted(.card-content){padding-top:0px;margin-top:-8px}:host ::slotted(.card-content){padding:16px}:host ::slotted(.card-actions){border-top:1px solid var(--divider-color,#e8e8e8);padding:5px 16px}"])))}},{kind:"method",key:"render",value:function(){return(0,h.dy)(o||(o=(0,i.Z)([" "," <slot></slot> "])),this.header?(0,h.dy)(n||(n=(0,i.Z)(['<h1 class="card-header">',"</h1>"])),this.header):h.Ld)}}]}}),h.oi)},31206:function(e,a,t){var r,o=t(88962),n=t(33368),i=t(71650),l=t(82390),c=t(69205),d=t(70906),s=t(91808),u=t(34541),p=t(47838),h=t(30879),f=t(68144),g=t(79932);(0,s.Z)([(0,g.Mo)("ha-circular-progress")],(function(e,a){var t=function(a){(0,c.Z)(r,a);var t=(0,d.Z)(r);function r(){var a;(0,i.Z)(this,r);for(var o=arguments.length,n=new Array(o),c=0;c<o;c++)n[c]=arguments[c];return a=t.call.apply(t,[this].concat(n)),e((0,l.Z)(a)),a}return(0,n.Z)(r)}(a);return{F:t,d:[{kind:"field",decorators:[(0,g.Cb)({type:Boolean})],key:"active",value:function(){return!1}},{kind:"field",decorators:[(0,g.Cb)()],key:"alt",value:function(){return"Loading"}},{kind:"field",decorators:[(0,g.Cb)()],key:"size",value:function(){return"medium"}},{kind:"set",key:"density",value:function(e){}},{kind:"get",key:"density",value:function(){switch(this.size){case"tiny":return-8;case"small":return-5;case"medium":default:return 0;case"large":return 5}}},{kind:"set",key:"indeterminate",value:function(e){}},{kind:"get",key:"indeterminate",value:function(){return this.active}},{kind:"get",static:!0,key:"styles",value:function(){return[(0,u.Z)((0,p.Z)(t),"styles",this),(0,f.iv)(r||(r=(0,o.Z)([":host{overflow:hidden}"])))]}}]}}),h.D)},67622:function(e,a,t){var r,o,n,i,l,c,d=t(88962),s=t(33368),u=t(71650),p=t(82390),h=t(69205),f=t(70906),g=t(91808),k=t(34541),v=t(47838),b=t(31338),m=t(68144),y=t(79932),x=t(83448),_=t(47181);t(31206),t(10983),(0,g.Z)([(0,y.Mo)("ha-file-upload")],(function(e,a){var t=function(a){(0,h.Z)(r,a);var t=(0,f.Z)(r);function r(){var a;(0,u.Z)(this,r);for(var o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return a=t.call.apply(t,[this].concat(n)),e((0,p.Z)(a)),a}return(0,s.Z)(r)}(a);return{F:t,d:[{kind:"field",decorators:[(0,y.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,y.Cb)()],key:"accept",value:void 0},{kind:"field",decorators:[(0,y.Cb)()],key:"icon",value:void 0},{kind:"field",decorators:[(0,y.Cb)()],key:"label",value:void 0},{kind:"field",decorators:[(0,y.Cb)()],key:"value",value:function(){return null}},{kind:"field",decorators:[(0,y.Cb)({type:Boolean})],key:"uploading",value:function(){return!1}},{kind:"field",decorators:[(0,y.Cb)({type:Boolean,attribute:"auto-open-file-dialog"})],key:"autoOpenFileDialog",value:function(){return!1}},{kind:"field",decorators:[(0,y.SB)()],key:"_drag",value:function(){return!1}},{kind:"field",decorators:[(0,y.IO)("#input")],key:"_input",value:void 0},{kind:"method",key:"firstUpdated",value:function(e){(0,k.Z)((0,v.Z)(t.prototype),"firstUpdated",this).call(this,e),this.autoOpenFileDialog&&this._openFilePicker()}},{kind:"method",key:"render",value:function(){var e;return(0,m.dy)(r||(r=(0,d.Z)([" "," "])),this.uploading?(0,m.dy)(o||(o=(0,d.Z)(['<ha-circular-progress alt="Uploading" size="large" active></ha-circular-progress>']))):(0,m.dy)(n||(n=(0,d.Z)([' <label for="input" class="mdc-text-field mdc-text-field--filled ','" @drop="','" @dragenter="','" @dragover="','" @dragleave="','" @dragend="','"> <span class="mdc-text-field__ripple"></span> <span class="mdc-floating-label ','" id="label">',"</span> ",' <div class="value">','</div> <input id="input" type="file" class="mdc-text-field__input file" accept="','" @change="','" aria-labelledby="label"> ',' <span class="mdc-line-ripple ','"></span> </label> '])),(0,x.$)({"mdc-text-field--focused":this._drag,"mdc-text-field--with-leading-icon":Boolean(this.icon),"mdc-text-field--with-trailing-icon":Boolean(this.value)}),this._handleDrop,this._handleDragStart,this._handleDragStart,this._handleDragEnd,this._handleDragEnd,this.value||this._drag?"mdc-floating-label--float-above":"",this.label,this.icon?(0,m.dy)(i||(i=(0,d.Z)(['<span class="mdc-text-field__icon mdc-text-field__icon--leading"> <ha-icon-button @click="','" .path="','"></ha-icon-button> </span>'])),this._openFilePicker,this.icon):"",this.value,this.accept,this._handleFilePicked,this.value?(0,m.dy)(l||(l=(0,d.Z)(['<span class="mdc-text-field__icon mdc-text-field__icon--trailing"> <ha-icon-button slot="suffix" @click="','" .label="','" .path="','"></ha-icon-button> </span>'])),this._clearValue,(null===(e=this.hass)||void 0===e?void 0:e.localize("ui.common.close"))||"close","M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"):"",this._drag?"mdc-line-ripple--active":""))}},{kind:"method",key:"_openFilePicker",value:function(){var e;null===(e=this._input)||void 0===e||e.click()}},{kind:"method",key:"_handleDrop",value:function(e){var a;e.preventDefault(),e.stopPropagation(),null!==(a=e.dataTransfer)&&void 0!==a&&a.files&&(0,_.B)(this,"file-picked",{files:e.dataTransfer.files}),this._drag=!1}},{kind:"method",key:"_handleDragStart",value:function(e){e.preventDefault(),e.stopPropagation(),this._drag=!0}},{kind:"method",key:"_handleDragEnd",value:function(e){e.preventDefault(),e.stopPropagation(),this._drag=!1}},{kind:"method",key:"_handleFilePicked",value:function(e){(0,_.B)(this,"file-picked",{files:e.target.files})}},{kind:"method",key:"_clearValue",value:function(e){e.preventDefault(),this.value=null,(0,_.B)(this,"change")}},{kind:"get",static:!0,key:"styles",value:function(){return[b.W,(0,m.iv)(c||(c=(0,d.Z)([':host{display:block}.mdc-text-field--filled{height:auto;padding-top:16px;cursor:pointer}.mdc-text-field--filled.mdc-text-field--with-trailing-icon{padding-top:28px}.mdc-text-field:not(.mdc-text-field--disabled) .mdc-text-field__icon{color:var(--secondary-text-color)}.mdc-text-field--filled.mdc-text-field--with-trailing-icon .mdc-text-field__icon{align-self:flex-end}.mdc-text-field__icon--leading{margin-bottom:12px;inset-inline-start:initial;inset-inline-end:0px;direction:var(--direction)}.mdc-text-field--filled .mdc-floating-label--float-above{transform:scale(.75);top:8px}.mdc-floating-label{inset-inline-start:16px!important;inset-inline-end:initial!important;direction:var(--direction)}.mdc-text-field--filled .mdc-floating-label{inset-inline-start:48px!important;inset-inline-end:initial!important;direction:var(--direction)}.mdc-text-field__icon--trailing{pointer-events:auto!important}.dragged:before{position:var(--layout-fit_-_position);top:var(--layout-fit_-_top);right:var(--layout-fit_-_right);bottom:var(--layout-fit_-_bottom);left:var(--layout-fit_-_left);background:currentColor;content:"";opacity:var(--dark-divider-opacity);pointer-events:none;border-radius:4px}.value{width:100%}input.file{display:none}img{max-width:100%;max-height:125px}ha-icon-button{--mdc-icon-button-size:24px;--mdc-icon-size:20px}ha-circular-progress{display:block;text-align-last:center}'])))]}}]}}),m.oi)},90806:function(e,a,t){var r,o,n=t(88962),i=t(33368),l=t(71650),c=t(82390),d=t(69205),s=t(70906),u=t(91808),p=t(44636),h=t(68144),f=t(79932);(0,u.Z)([(0,f.Mo)("ha-header-bar")],(function(e,a){var t=function(a){(0,d.Z)(r,a);var t=(0,s.Z)(r);function r(){var a;(0,l.Z)(this,r);for(var o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return a=t.call.apply(t,[this].concat(n)),e((0,c.Z)(a)),a}return(0,i.Z)(r)}(a);return{F:t,d:[{kind:"method",key:"render",value:function(){return(0,h.dy)(r||(r=(0,n.Z)(['<header class="mdc-top-app-bar"> <div class="mdc-top-app-bar__row"> <section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-start" id="navigation"> <slot name="navigationIcon"></slot> <span class="mdc-top-app-bar__title"> <slot name="title"></slot> </span> </section> <section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-end" id="actions" role="toolbar"> <slot name="actionItems"></slot> </section> </div> </header>'])))}},{kind:"get",static:!0,key:"styles",value:function(){return[(0,h.$m)(p),(0,h.iv)(o||(o=(0,n.Z)([".mdc-top-app-bar__row{height:var(--header-height)}.mdc-top-app-bar{position:static;color:var(--mdc-theme-on-primary,#fff)}.mdc-top-app-bar__section.mdc-top-app-bar__section--align-start{flex:1}.mdc-top-app-bar__section.mdc-top-app-bar__section--align-end{flex:none}"])))]}}]}}),h.oi)},60538:function(e,a,t){t.d(a,{FZ:function(){return c},_P:function(){return l},p_:function(){return d}});var r=t(99312),o=t(81043),n=t(63864),i=t(41682),l=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(a,t){var o,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=8;break}if(!(0,n.I)(a.config.version,2021,2,4)){e.next=3;break}return e.abrupt("return",a.callWS({type:"supervisor/api",endpoint:"/".concat((0,n.I)(a.config.version,2021,9)?"backups":"snapshots","/").concat(t,"/info"),method:"get"}));case 3:return e.t0=i.rY,e.next=6,a.callApi("GET","hassio/".concat((0,n.I)(a.config.version,2021,9)?"backups":"snapshots","/").concat(t,"/info"));case 6:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 8:return e.next=10,fetch("/api/hassio/backups/".concat(t,"/info"),{method:"GET"});case 10:return o=e.sent,e.next=13,o.json();case 13:return l=e.sent.data,e.abrupt("return",l);case 15:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),c=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(a,t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,n.I)(a.config.version,2021,2,4)){e.next=4;break}return e.next=3,a.callWS({type:"supervisor/api",endpoint:"/".concat((0,n.I)(a.config.version,2021,9)?"backups/".concat(t):"snapshots/".concat(t,"/remove")),method:(0,n.I)(a.config.version,2021,9)?"delete":"post"});case 3:return e.abrupt("return");case 4:return e.next=6,a.callApi("POST","hassio/".concat((0,n.I)(a.config.version,2021,9)?"backups":"snapshots","/").concat(t,"/remove"));case 6:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),d=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(a,t){var o,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((o=new FormData).append("file",t),!a){e.next=8;break}return e.next=5,a.fetchWithAuth("/api/hassio/".concat((0,n.I)(a.config.version,2021,9)?"backups":"snapshots","/new/upload"),{method:"POST",body:o});case 5:i=e.sent,e.next=11;break;case 8:return e.next=10,fetch("/api/hassio/backups/new/upload",{method:"POST",body:o});case 10:i=e.sent;case 11:if(413!==i.status){e.next=15;break}throw new Error("Uploaded backup is too large");case 15:if(200===i.status){e.next=17;break}throw new Error("".concat(i.status," ").concat(i.statusText));case 17:return e.abrupt("return",i.json());case 18:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}()},41682:function(e,a,t){t.d(a,{js:function(){return n},rY:function(){return o}});var r=t(76775),o=function(e){return e.data},n=function(e){return"object"===(0,r.Z)(e)?"object"===(0,r.Z)(e.body)?e.body.message||"Unknown error, see supervisor logs":e.body||e.message||"Unknown error, see supervisor logs":e};new Set([502,503,504])},4215:function(e,a,t){t.r(a);var r,o,n,i=t(99312),l=t(81043),c=t(88962),d=t(33368),s=t(71650),u=t(82390),p=t(69205),h=t(70906),f=t(91808),g=t(34541),k=t(47838),v=(t(53918),t(68144)),b=t(79932),m=t(47181),y=(t(48259),t(22098),t(54736),t(76307)),x=t(74265),_=t(11654);t(38544),(0,f.Z)([(0,b.Mo)("onboarding-restore-backup")],(function(e,a){var f,Z=function(a){(0,p.Z)(r,a);var t=(0,h.Z)(r);function r(){var a;(0,s.Z)(this,r);for(var o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return a=t.call.apply(t,[this].concat(n)),e((0,u.Z)(a)),a}return(0,d.Z)(r)}(a);return{F:Z,d:[{kind:"field",decorators:[(0,b.Cb)()],key:"localize",value:void 0},{kind:"field",decorators:[(0,b.Cb)()],key:"language",value:void 0},{kind:"field",decorators:[(0,b.Cb)({type:Boolean})],key:"restoring",value:function(){return!1}},{kind:"method",key:"render",value:function(){return this.restoring?(0,v.dy)(r||(r=(0,c.Z)(['<ha-card .header="','"> <onboarding-loading></onboarding-loading> </ha-card>'])),this.localize("ui.panel.page-onboarding.restore.in_progress")):(0,v.dy)(o||(o=(0,c.Z)([' <button class="link" @click="','"> '," </button> "])),this._uploadBackup,this.localize("ui.panel.page-onboarding.restore.description"))}},{kind:"method",key:"_uploadBackup",value:function(){var e,a,r=this;e=this,a={showBackup:function(e){return r._showBackupDialog(e)},onboarding:!0},(0,m.B)(e,"show-dialog",{dialogTag:"dialog-hassio-backup-upload",dialogImport:function(){return Promise.resolve().then(t.bind(t,48259))},dialogParams:a})}},{kind:"method",key:"firstUpdated",value:function(e){var a=this;(0,g.Z)((0,k.Z)(Z.prototype),"firstUpdated",this).call(this,e),(0,x.lD)(this,this.shadowRoot),setInterval((function(){return a._checkRestoreStatus()}),1e3)}},{kind:"method",key:"_checkRestoreStatus",value:(f=(0,l.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.restoring){e.next=9;break}return e.prev=1,e.next=4,(0,y.Dq)();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),"unauthorized"===e.t0.message&&window.location.replace("/");case 9:case"end":return e.stop()}}),e,this,[[1,6]])}))),function(){return f.apply(this,arguments)})},{kind:"method",key:"_showBackupDialog",value:function(e){var a,r;a=this,r={slug:e,onboarding:!0,localize:this.localize},(0,m.B)(a,"show-dialog",{dialogTag:"dialog-hassio-backup",dialogImport:function(){return Promise.all([t.e(79071),t.e(63436),t.e(28597),t.e(99608),t.e(2185),t.e(65666),t.e(41985),t.e(23254),t.e(39975),t.e(97215),t.e(70632),t.e(6971),t.e(52154),t.e(3268),t.e(41638)]).then(t.bind(t,41638))},dialogParams:r})}},{kind:"get",static:!0,key:"styles",value:function(){return[_.Qx,(0,v.iv)(n||(n=(0,c.Z)([".logentry{text-align:center}ha-card{padding:4px;margin-top:8px}ha-ansi-to-html{display:block;line-height:22px;padding:0 8px;white-space:pre-wrap}@media all and (min-width:600px){ha-card{width:600px;margin-left:-100px}}"])))]}}]}}),function(e){(0,p.Z)(t,e);var a=(0,h.Z)(t);function t(){var e;(0,s.Z)(this,t);for(var r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return(e=a.call.apply(a,[this].concat(o))).hass=void 0,e.__provideHass=[],e}return(0,d.Z)(t,[{key:"provideHass",value:function(e){this.__provideHass.push(e),e.hass=this.hass}},{key:"updated",value:function(e){var a=this;(0,g.Z)((0,k.Z)(t.prototype),"updated",this).call(this,e),e.has("hass")&&this.__provideHass.forEach((function(e){e.hass=a.hass}))}}]),t}(v.oi))}}]);
//# sourceMappingURL=4215-TjpH3fkzGh8.js.map