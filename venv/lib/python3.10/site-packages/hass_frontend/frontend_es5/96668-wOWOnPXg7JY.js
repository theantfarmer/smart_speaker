"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[96668],{65253:function(e,t,n){n.d(t,{CE:function(){return s},FH:function(){return h},Nq:function(){return c},Pb:function(){return a},fm:function(){return d},h8:function(){return l},r4:function(){return o},uh:function(){return u}});var r=n(99312),i=n(81043),a="system-admin",s="system-users",u=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.callWS({type:"config/auth/list"}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i,a){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.callWS({type:"config/auth/create",name:n,group_ids:i,local_only:a}));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}(),c=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.callWS(Object.assign(Object.assign({},i),{},{type:"config/auth/update",user_id:n})));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),l=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.callWS({type:"config/auth/delete",user_id:n}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),d=function(e){return e?e.trim().split(" ").slice(0,3).map((function(e){return e.substring(0,1)})).join(""):"?"},h=function(e,t,n){var r=[],i=function(t){return e.localize("ui.panel.config.users.".concat(t))};return t.is_owner&&r.push(["M12 2C6.47 2 2 6.5 2 12C2 17.5 6.5 22 12 22S22 17.5 22 12 17.5 2 12 2M12 20C7.58 20 4 16.42 4 12C4 7.58 7.58 4 12 4S20 7.58 20 12C20 16.42 16.42 20 12 20M8 14L7 8L10 10L12 7L14 10L17 8L16 14H8M8.56 16C8.22 16 8 15.78 8 15.44V15H16V15.44C16 15.78 15.78 16 15.44 16H8.56Z",i("is_owner")]),n&&t.system_generated&&r.push(["M11,7H15V9H11V11H13A2,2 0 0,1 15,13V15A2,2 0 0,1 13,17H9V15H13V13H11A2,2 0 0,1 9,11V9A2,2 0 0,1 11,7M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4Z",i("is_system")]),t.local_only&&r.push(["M12 20C7.6 20 4 16.4 4 12S7.6 4 12 4 20 7.6 20 12 16.4 20 12 20M12 2C6.5 2 2 6.5 2 12S6.5 22 12 22 22 17.5 22 12 17.5 2 12 2M11 14H13V17H16V12H18L12 7L6 12H8V17H11V14",i("is_local")]),t.is_active||r.push(["M12 2C17.5 2 22 6.5 22 12S17.5 22 12 22 2 17.5 2 12 6.5 2 12 2M12 4C10.1 4 8.4 4.6 7.1 5.7L18.3 16.9C19.3 15.5 20 13.8 20 12C20 7.6 16.4 4 12 4M16.9 18.3L5.7 7.1C4.6 8.4 4 10.1 4 12C4 16.4 7.6 20 12 20C13.9 20 15.6 19.4 16.9 18.3Z",i("is_not_active")]),r}},96668:function(e,t,n){n.r(t),n.d(t,{HaConfigUsers:function(){return B}});var r,i,a,s,u,o,c,l,d,h,f=n(53709),p=n(99312),m=n(81043),v=n(68990),b=n(88962),g=n(33368),y=n(71650),_=n(82390),Z=n(69205),k=n(70906),w=n(91808),C=n(34541),H=n(47838),x=n(68144),V=n(79932),L=n(14516),M=(n(12171),n(36125),n(76865),n(52039),n(65253)),A=n(26765),z=(n(24090),n(29311)),S=n(91188),U=n(47181),P=function(){return Promise.all([n.e(28597),n.e(52369),n.e(4503)]).then(n.bind(n,4503))},W="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z",B=(0,w.Z)([(0,V.Mo)("ha-config-users")],(function(e,t){var n,w=function(t){(0,Z.Z)(r,t);var n=(0,k.Z)(r);function r(){var t;(0,y.Z)(this,r);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return t=n.call.apply(n,[this].concat(a)),e((0,_.Z)(t)),t}return(0,g.Z)(r)}(t);return{F:w,d:[{kind:"field",decorators:[(0,V.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,V.Cb)({attribute:!1})],key:"_users",value:function(){return[]}},{kind:"field",decorators:[(0,V.Cb)({type:Boolean})],key:"isWide",value:void 0},{kind:"field",decorators:[(0,V.Cb)({type:Boolean})],key:"narrow",value:void 0},{kind:"field",decorators:[(0,V.Cb)({attribute:!1})],key:"route",value:void 0},{kind:"field",key:"_columns",value:function(){var e=this;return(0,L.Z)((function(t,n){return{name:{title:n("ui.panel.config.users.picker.headers.name"),main:!0,sortable:!0,filterable:!0,width:"25%",direction:"asc",grows:!0,template:function(a,s){return t?(0,x.dy)(r||(r=(0,b.Z)([" ",'<br> <div class="secondary"> '," "," </div>"])),a,s.username?"".concat(s.username," |"):"",n("groups.".concat(s.group_ids[0]))):(0,x.dy)(i||(i=(0,b.Z)([" ",""])),a||e.hass.localize("ui.panel.config.users.editor.unnamed_user"))}},username:{title:n("ui.panel.config.users.picker.headers.username"),sortable:!0,filterable:!0,width:"20%",direction:"asc",hidden:t,template:function(e){return(0,x.dy)(a||(a=(0,b.Z)(["",""])),e||"â€”")}},group_ids:{title:n("ui.panel.config.users.picker.headers.group"),sortable:!0,filterable:!0,width:"20%",direction:"asc",hidden:t,template:function(e){return(0,x.dy)(s||(s=(0,b.Z)([" "," "])),n("groups.".concat(e[0])))}},is_active:{title:e.hass.localize("ui.panel.config.users.picker.headers.is_active"),type:"icon",sortable:!0,filterable:!0,width:"80px",hidden:t,template:function(e){return e?(0,x.dy)(u||(u=(0,b.Z)(['<ha-svg-icon .path="','"></ha-svg-icon>'])),W):""}},system_generated:{title:e.hass.localize("ui.panel.config.users.picker.headers.system"),type:"icon",sortable:!0,filterable:!0,width:"80px",hidden:t,template:function(e){return e?(0,x.dy)(o||(o=(0,b.Z)(['<ha-svg-icon .path="','"></ha-svg-icon>'])),W):""}},local_only:{title:e.hass.localize("ui.panel.config.users.picker.headers.local"),type:"icon",sortable:!0,filterable:!0,width:"80px",hidden:t,template:function(e){return e?(0,x.dy)(c||(c=(0,b.Z)(['<ha-svg-icon .path="','"></ha-svg-icon>'])),W):""}},icons:{title:"",label:e.hass.localize("ui.panel.config.users.picker.headers.icon"),type:"icon",sortable:!1,filterable:!1,width:"104px",hidden:!t,template:function(t,n){var r=(0,M.FH)(e.hass,n,!1);return(0,x.dy)(l||(l=(0,b.Z)(["",""])),r.map((function(e){var t=(0,v.Z)(e,2),n=t[0],r=t[1];return(0,x.dy)(d||(d=(0,b.Z)(['<ha-data-table-icon .path="','" .tooltip="','"></ha-data-table-icon>'])),n,r)})))}}}}))}},{kind:"method",key:"firstUpdated",value:function(e){(0,C.Z)((0,H.Z)(w.prototype),"firstUpdated",this).call(this,e),this._fetchUsers()}},{kind:"method",key:"render",value:function(){return(0,x.dy)(h||(h=(0,b.Z)([' <hass-tabs-subpage-data-table .hass="','" .narrow="','" .route="','" backPath="/config" .tabs="','" .columns="','" .data="','" @row-click="','" hasFab clickable> <ha-fab slot="fab" .label="','" extended @click="','"> <ha-svg-icon slot="icon" .path="','"></ha-svg-icon> </ha-fab> </hass-tabs-subpage-data-table> '])),this.hass,this.narrow,this.route,z.configSections.persons,this._columns(this.narrow,this.hass.localize),this._users,this._editUser,this.hass.localize("ui.panel.config.users.picker.add_user"),this._addUser,"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z")}},{kind:"method",key:"_fetchUsers",value:(n=(0,m.Z)((0,p.Z)().mark((function e(){return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,M.uh)(this.hass);case 2:this._users=e.sent,this._users.forEach((function(e){e.is_owner&&e.group_ids.unshift("owner")}));case 4:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{kind:"method",key:"_editUser",value:function(e){var t,n,r,i,a=this,s=e.detail.id,u=this._users.find((function(e){return e.id===s}));u&&(t=this,n={entry:u,updateEntry:(i=(0,m.Z)((0,p.Z)().mark((function e(t){var n;return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,M.Nq)(a.hass,u.id,t);case 2:n=e.sent,a._users=a._users.map((function(e){return e===u?n.user:e}));case 4:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)}),removeEntry:(r=(0,m.Z)((0,p.Z)().mark((function e(){return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,A.g7)(a,{title:a.hass.localize("ui.panel.config.users.editor.confirm_user_deletion_title","name",u.name),text:a.hass.localize("ui.panel.config.users.editor.confirm_user_deletion_text"),dismissText:a.hass.localize("ui.common.cancel"),confirmText:a.hass.localize("ui.common.delete"),destructive:!0});case 2:if(e.sent){e.next=4;break}return e.abrupt("return",!1);case 4:return e.prev=4,e.next=7,(0,M.h8)(a.hass,u.id);case 7:return a._users=a._users.filter((function(e){return e!==u})),e.abrupt("return",!0);case 11:return e.prev=11,e.t0=e.catch(4),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[4,11]])}))),function(){return r.apply(this,arguments)})},(0,U.B)(t,"show-dialog",{dialogTag:"dialog-user-detail",dialogImport:P,dialogParams:n}))}},{kind:"method",key:"_addUser",value:function(){var e,t=this;(0,S.G)(this,{userAddedCallback:(e=(0,m.Z)((0,p.Z)().mark((function e(n){return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n&&(t._users=[].concat((0,f.Z)(t._users),[n]));case 1:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})})}}]}}),x.oi)},91188:function(e,t,n){n.d(t,{G:function(){return a}});var r=n(47181),i=function(){return Promise.all([n.e(28597),n.e(53398),n.e(74898)]).then(n.bind(n,74898))},a=function(e,t){(0,r.B)(e,"show-dialog",{dialogTag:"dialog-add-user",dialogImport:i,dialogParams:t})}}}]);
//# sourceMappingURL=96668-wOWOnPXg7JY.js.map